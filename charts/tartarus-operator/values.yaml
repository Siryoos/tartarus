# Default values for tartarus-operator
# This is a YAML-formatted file.

# Number of operator replicas
replicaCount: 1

image:
  repository: tartarus/operator
  tag: latest
  pullPolicy: IfNotPresent

# Image pull secrets
imagePullSecrets: []

# Override the name
nameOverride: ""
fullnameOverride: ""

# Service account configuration
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use
  name: ""

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65532
  fsGroup: 65532

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

# Olympus API configuration
olympus:
  # Address of the Olympus API
  address: "http://olympus-api:8080"
  # Secret name containing the API key (optional)
  apiKeySecretName: ""
  apiKeySecretKey: "api-key"

# Resource requests and limits
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 256Mi

# Node selector for scheduling
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}

# Leader election configuration for HA
leaderElection:
  enabled: true
  # Leader election ID
  id: "tartarus-operator.tartarus.io"

# Metrics configuration
metrics:
  enabled: true
  port: 8080
  # ServiceMonitor for Prometheus Operator (optional)
  serviceMonitor:
    enabled: false
    namespace: ""
    interval: 30s
    scrapeTimeout: 10s

# Health probes configuration
probes:
  health:
    port: 8081
  
# Logging configuration
logging:
  # Log level: debug, info, warn, error
  level: info
  # Use JSON format for logs
  json: false

# Multi-tenant configuration
tenantMapping:
  # Enable multi-tenant features
  enabled: true
  # Default network policy for tenants without explicit configuration
  defaultNetworkPolicy:
    denyPrivate: true
    denyMetadata: true
    allowedCidrs: []

# Network policy to restrict operator pod traffic
networkPolicy:
  enabled: false

# CRD management
crds:
  # Install CRDs with the chart
  install: true
  # Keep CRDs on chart uninstall
  keep: true

# RBAC configuration
rbac:
  # Create RBAC resources
  create: true
  # Additional rules to add to the ClusterRole
  additionalRules: []
